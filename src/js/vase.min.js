!function(t,e,s,n){"use strict";let a="VaSe",i=a.toLowerCase(),r="vase--",o={api:{url:"",custom:[{name:"api_key",value:""},],param:{success:{name:"result",value:"success"},message:""}},data:{form_method:"post",send_headers:!0},status:{ajax_processing:!1,response_from_api_visible:!0},text_vars:{wrong_input_text:"Wrong input",status_sending:"Sending form...",status_success:"Form sent successfuly",status_error:"Server encountered an error"},form:{novalidate:!0,form:null,status:null},input:{input_container_class:".input",correct_input_class:r+"correct-input",wrong_input_class:r+"wrong-input",fields:[],agreements:[],regex_table:{alpha:/(.|\s)*/,phone:/(\(?(\+|00)?48\)?([ -]?))?(\d{3}[ -]?\d{3}[ -]?\d{3})|([ -]?\d{2}[ -]?\d{3}[ -]?\d{2}[ -]?\d{2})/,email:/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,name:/^[a-zA-Z\u00E0\u00E1\u00E2\u00E4\u00E3\u00E5\u0105\u010D\u0107\u0119\u00E8\u00E9\u00EA\u00EB\u0117\u012F\u00EC\u00ED\u00EE\u00EF\u0142\u0144\u00F2\u00F3\u00F4\u00F6\u00F5\u00F8\u00F9\u00FA\u00FB\u00FC\u0173\u016B\u00FF\u00FD\u017C\u017A\u00F1\u00E7\u010D\u015B\u0161\u015B\u017E\u00C0\u00C1\u00C2\u00C4\u00C3\u00C5\u0104\u0106\u010C\u0116\u0118\u00C8\u00C9\u00CA\u00CB\u00CC\u00CD\u00CE\u00CF\u012E\u0141\u0143\u00D2\u00D3\u00D4\u00D6\u00D5\u00D8\u00D9\u00DA\u00DB\u00DC\u0172\u016A\u0178\u00DD\u017B\u0179\u00D1\u00DF\u00C7\u0152\u00C6\u010C\u015A\u0160\u015A\u017D\u2202\u00F0 ,.'-]+$/},data_dictionary:{}},callbacks:{}};function u(e,s){this.element=e,this.settings=t.extend(!0,{},o,s),this._defaults=o,this._name=a,this._nameLower=i,this._objPrefix=r,this._inputAllMask="input, select, textarea",this._methods=l,this.html=t("html"),this.form={obj:null,status:null},this._methods.init(this)}let l={init:function(t){t._methods.initForm(t)},initForm:function(t){t._methods.initForm_generate_defaults(t),t._methods.initForm_generate_content(t),t._methods.formAppendEventListeners(t),t._methods.formApplyMisc(t)},initForm_generate_defaults:function(e){e.form.jq_obj=t(e.element),e.form.status=e.settings.form.status,e.settings.form.novalidate&&e.form.jq_obj.attr("novalidate","novalidate"),e.settings.api.url||(e.settings.api.url=e.form.jq_obj.attr("action")),e.settings.data.form_method||(e.settings.data.form_method=e.form.jq_obj.attr("method"))},initForm_generate_content:function(e){let s=e.form.jq_obj.find("[data-"+e._nameLower+"]"),n=[],a=[],i=t([]);s.each(function(){let s=t(this),r=s.data(e._nameLower);r&&(r.obj=s,"field"===r.element_type?n.push(r):"agreement"===r.element_type?a.push(r):"status"===r.element_type&&(i=i.add(s)))}),e.settings.input.fields.length||(e.settings.input.fields=n),e.settings.input.agreements.length||(e.settings.input.agreements=a),e.form.status||(e.form.status=i),e._methods.initForm_generate_fields(e),e._methods.initForm_generate_agreements(e)},initForm_generate_fields:function(t){let e=t.settings.input.fields.length;for(let s=0;s<e;s++){let n=t.settings.input.fields[s].obj,a=t._methods.initForm_generate_single_field(t,n,t.settings.input.fields[s]);t.settings.input.fields[s]=a}},initForm_generate_single_field:function(e,s,n){let a=t.extend({},{},n),i=s,r=i.data(e._nameLower),o="",u="",l="",c="";if(!r||(o=i.closest(e.settings.input.input_container_class),u=i.attr("type"),l=r.field_data_type,(c=r.wrong_input_text)||(c=e.settings.text_vars.wrong_input_text)),!l)switch(u){case"tel":l="phone";break;case"email":l="email";break;default:l="alpha"}let d={obj:i,container:o,label:o.find("label"),type:u,field_data_type:l,max_length:i.attr("max-length"),required:i.prop("required"),wrong_input_text:c};return a&&(d=t.extend({},d,a)),d},initForm_generate_agreements:function(t){let e=t.settings.input.agreements.length;for(let s=0;s<e;s++){let n=t.settings.input.agreements[s].obj,a=t._methods.initForm_generate_single_agreement_field(t,n,t.settings.input.agreements[s]);t.settings.input.agreements[s]=a}},initForm_generate_single_agreement_field:function(e,s,n){let a=t.extend({},{},n),i=s,r=i.data(e._nameLower),o="",u="",l="",c="";if(!r||(o=i.closest(e.settings.input.input_container_class),u=i.attr("type"),l=r.field_data_type,(c=r.wrong_input_text)||(c=e.settings.text_vars.wrong_input_text)),!l)switch(u){case"checkbox":l="checkbox";break;case"radio":l="radio";break;default:l=""}let d={obj:i,container:o,label:o.find("label"),type:u,field_data_type:l,required:i.prop("required"),wrong_input_text:c};return a&&(d=t.extend({},d,a)),d},formAppendEventListeners:function(e){for(let s=0;s<e.settings.input.fields.length;s++){let n=e.settings.input.fields[s];n.obj.data(e._objPrefix+"index",s),n.obj.on("input blur paste",function(s){let n=t(this),a=n.data(e._objPrefix+"index");e._methods.ValidateForm(e,[e.settings.input.fields[a]],{append_status:!1,focus_first_wrong:!1,clear_status_if_empty:!0})&&console.log("input validation successful"),e._methods.formCheckIfInputHasContent(e,n)}),e._methods.formCheckIfInputHasContent(e,n.obj)}for(let a=0;a<e.settings.input.agreements.length;a++){let i=e.settings.input.agreements[a];i.obj.data(e._objPrefix+"index",a),i.obj.on("change",function(s){let n=t(this).data(e._objPrefix+"index");e._methods.ValidateForm(e,[e.settings.input.agreements[n]],{append_status:!1,focus_first_wrong:!1,clear_status_if_empty:!0})&&console.log("agreement validation successful")})}e.form.jq_obj.on("submit",function(s){e.settings.callbacks.onSend&&e.settings.callbacks.onSend.before&&e.settings.callbacks.onSend.before.function&&t.isFunction(e.settings.callbacks.onSend.before.function)&&e.settings.callbacks.onSend.before.function.apply(e.settings.callbacks.onSend.before.this,[t.extend(!0,{},e.settings.callbacks.onSend.before.parameters)]);let n=e._methods.SendData(e,{callback:{success:{function:e._methods.SendDataReturn,this:e,parameters:[e,{reset_input:!0,message:e.settings.text_vars.status_success,style:"success"}]},error:{function:e._methods.SendDataReturn,this:e,parameters:[e,{reset_input:!1,message:e.settings.text_vars.status_error,style:"error"}]}}});return console.log("Submit form status: "+n.success+", "+n.message),!1})},formCheckIfInputHasContent:function(t,e){e.val()?e.addClass(t._objPrefix+"has-content"):e.removeClass(t._objPrefix+"has-content")},formApplyMisc:function(e){let s=e.form.jq_obj.find(e._inputAllMask);if(console.log("js input mask: "+(void 0!==t.fn.inputmask)),void 0!==t.fn.inputmask){let n=s.filter('input[type="tel"], .jsm--phone');console.log("js input mask || masked items: "),console.log(n),n.inputmask({mask:["###-###-###","## ###-##-##"],greedy:!1,definitions:{"#":{validator:"[0-9]",cardinality:1}}})}},ValidateField:function(e,s,n){t.extend({},{},n);let a=s,i=a.obj,r=!0,o=null,u;if("checkbox"===a.type)u=i.prop("checked"),!0!==a.required||u||(r=!1),o=!u;else if("select"===a.type)u=i.val(),!0!==a.required||u||(r=!1),o=!u;else{if(u=i.val(),!0===a.required||u){let l=e.settings.input.regex_table;a.field_data_type&&a.field_data_type in l&&l[a.field_data_type].test(u)||(r=!1),r=r&&u}o=!u}return{is_valid:r,is_empty:o,field:a}},ValidateForm:function(e,s,n){let a=t.extend({},{append_status:!0,focus_first_wrong:!0,fade_duration:300,clear_status_only:!1,clear_status_if_empty:!1},n),i=s,r=!0,o=[];for(let u=0;u<i.length;u++){let l=i[u],c=e._methods.ValidateField(e,l),d=l.obj,p=l.container,$=p.find("."+e._objPrefix+"status");if(a.append_status?$.remove():$.fadeOut(a.fade_duration,function(){$.remove()}),a.clear_status_only||a.clear_status_if_empty&&!0===c.is_empty)d.removeClass(e.settings.input.correct_input_class),p.removeClass(e.settings.input.correct_input_class),d.removeClass(e.settings.input.wrong_input_class),p.removeClass(e.settings.input.wrong_input_class);else if(c.is_valid)d.removeClass(e.settings.input.wrong_input_class),p.removeClass(e.settings.input.wrong_input_class),d.addClass(e.settings.input.correct_input_class),p.addClass(e.settings.input.correct_input_class);else{if(d.removeClass(e.settings.input.correct_input_class),p.removeClass(e.settings.input.correct_input_class),d.addClass(e.settings.input.wrong_input_class),p.addClass(e.settings.input.wrong_input_class),o.push({field:l,message:""}),a.append_status){let m=t('<span class="'+e._objPrefix+'status"></span>');m.text(l.wrong_input_text),m.hide(),l.status=m.appendTo(p),m.fadeIn(a.fade_duration)}r=!1}}return a.focus_first_wrong&&o.length>0&&(o=e._methods.objSortByPositionInDOM(o,"field","obj"))[0].field.obj.focus(),r},SendDataReturn:function(e,s){let n=t.extend({},{reset_input:!0,message:"",style:""},s);n.reset_input&&e._methods.ResetInput(e,{clear_status_only:!0}),e._methods.StatusClear(e),e._methods.StatusAdd(e,n.message,{style:n.style})},ResetInput:function(e,s){let n=t.extend({},{clear_status_only:!1},s);e.form.jq_obj[0].reset(),e._methods.ValidateForm(e,e.settings.input.fields,{append_status:!1,focus_first_wrong:!1,clear_status_only:n.clear_status_only}),e._methods.ValidateForm(e,e.settings.input.agreements,{append_status:!1,focus_first_wrong:!1,clear_status_only:n.clear_status_only})},SendData:function(e,s){let n={success:!1,message:"SendData: Error (Default)"},a={url:e.settings.api.url,api_custom:e.settings.api.custom,data:e.form.jq_obj.serialize(),data_dictionary:e.settings.input.data_dictionary,type:e.settings.data.form_method,success_param:e.settings.api.param.success,return_param:e.settings.api.param.message,status_sending_text:e.settings.text_vars.status_sending,send_headers:e.settings.data.send_headers},i=t.extend(!0,{},a,s);e._methods.StatusClear(e);let r=e._methods.ValidateForm(e,e.settings.input.fields),o=e._methods.ValidateForm(e,e.settings.input.agreements,{focus_first_wrong:!1});return r&&o?(console.log("Validation successful"),console.log("Attempting to send data..."),e._methods.StatusClear(e),e._methods.StatusAdd(e,i.status_sending_text,{}),n=e._methods.SendDataAjax(e,i),e.settings.callbacks.onValidate&&e.settings.callbacks.onValidate.success&&e.settings.callbacks.onValidate.success.function&&t.isFunction(e.settings.callbacks.onValidate.success.function)&&e.settings.callbacks.onValidate.success.function.apply(e.settings.callbacks.onValidate.success.this,[t.extend(!0,{},e.settings.callbacks.onValidate.success.parameters)])):(n={success:!1,message:"SendData: Error (Validation)"},e.settings.callbacks.onValidate&&e.settings.callbacks.onValidate.error&&e.settings.callbacks.onValidate.error.function&&t.isFunction(e.settings.callbacks.onValidate.error.function)&&e.settings.callbacks.onValidate.error.function.apply(e.settings.callbacks.onValidate.error.this,[t.extend(!0,{},e.settings.callbacks.onValidate.error.parameters)])),n},SendDataAjax:function(e,s){let n={success:!1,message:"SendDataAjax: Error (Default)"},a=t.extend(!0,{},{url:"/",type:"POST",api_custom:[],data:"",data_dictionary:{},success_param:{name:"result",value:"success"},return_param:"message",send_headers:!0},s);if(a.api_custom){let i=a.api_custom.length,r="";a.data.length>0&&(r+="&");for(let o=0;o<i;o++)r+=a.api_custom[o].name+"="+a.api_custom[o].value,o<i-1&&(r+="&");a.data+=encodeURI(r)}let u=Object.keys(a.data_dictionary);for(let l=0;l<u.length;l++){let c=a.data_dictionary[u[l]];console.log(u[l]+" > "+c),a.data=a.data.replace(u[l],c)}return console.log(a),e.settings.status.ajax_processing?n={success:!1,message:"SendDataAjax: Error (Processing...)"}:(e.settings.status.ajax_processing=!0,n={success:!0,message:"SendDataAjax: Success (Got into ajax)"},a.send_headers&&t.ajaxSetup({headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8","X-Requested-With":"XMLHttpRequest"}}),t.ajax({url:a.url,type:a.type,data:a.data,enctype:"multipart/form-data",dataType:"json",processData:!1,success:function(s){let i=!1,r;if(console.log(s),s[a.return_param]){if(t.isArray(s[a.return_param]))for(let o in s[a.return_param])console.log(s[a.return_param][o]);console.log("API status: "+s.status),console.log("API message: "),console.log(s[a.return_param])}r=t.isArray(s[a.return_param])?s[a.return_param].join(", "):s[a.return_param],console.log(r),s[a.success_param.name]&&s[a.success_param.name]===a.success_param.value?(n={success:!0,message:"Success (API x:200)"},i=!0):i=!1,i?(a.callback.success&&a.callback.success.function&&t.isFunction(a.callback.success.function)&&a.callback.success.function.apply(a.callback.success.instance,a.callback.success.parameters),e.settings.callbacks.onSend&&e.settings.callbacks.onSend.success&&e.settings.callbacks.onSend.success.function&&t.isFunction(e.settings.callbacks.onSend.success.function)&&e.settings.callbacks.onSend.success.function.apply(e.settings.callbacks.onSend.success.this,[t.extend(!0,{},s,e.settings.callbacks.onSend.success.parameters)])):(a.callback.error&&a.callback.error.function&&t.isFunction(a.callback.error.function)&&a.callback.error.function.apply(a.callback.error.this,a.callback.error.parameters),e.settings.callbacks.onSend.error&&e.settings.callbacks.onSend.error.function&&t.isFunction(e.settings.callbacks.onSend.error.function)&&e.settings.callbacks.onSend.error.function.apply(e.settings.callbacks.onSend.error.this,[t.extend(!0,{},s,e.settings.callbacks.onSend.error.parameters)]),e.settings.status.response_from_api_visible&&r&&e._methods.StatusAdd(e,r,{style:"error"})),e.settings.status.ajax_processing=!1},error:function(s){console.log("API status: "+s.status),console.log("API message: "),console.log(s[a.return_param]),n={success:!1,message:"Error (API x:0)"},e.settings.status.ajax_processing=!1,a.callback.error&&a.callback.error.function&&t.isFunction(a.callback.error.function)&&a.callback.error.function.apply(a.callback.error.this,a.callback.error.parameters),e.settings.callbacks.onSend&&e.settings.callbacks.onSend.error&&e.settings.callbacks.onSend.error.function&&t.isFunction(e.settings.callbacks.onSend.error.function)&&e.settings.callbacks.onSend.error.function.apply(e.settings.callbacks.onSend.error.this,[t.extend(!0,{},s,e.settings.callbacks.onSend.error.parameters)])}})),n},StatusAdd:function(e,s,n){let a=t.extend({},{fade_duration:300,style:""},n),i=t("<p></p>");i.text(s),i.appendTo(e.form.status),i.hide(),"success"===a.style?(e._methods.StatusClearStyle(e),e.form.status.addClass("success")):"error"===a.style&&(e._methods.StatusClearStyle(e),e.form.status.addClass("error")),i.fadeIn(a.fade_duration)},StatusClearStyle:function(t){t.form.status.removeClass("success error")},StatusClear:function(t){t._methods.StatusClearStyle(t),t.form.status.empty()},objSortByPositionInDOM:function(t,e,s){let n=t,a;return e&&s?n.sort(function(t,n){return t[e][s][0]===n[e][s][0]?0:t[e][s][0].compareDocumentPosition?2&t[e][s][0].compareDocumentPosition(n[e][s][0])?1:-1:t[e][s][0].sourceIndex-n[e][s][0].sourceIndex}):e?n.sort(function(t,s){return t[e][0]===s[e][0]?0:t[e][0].compareDocumentPosition?2&t[e][0].compareDocumentPosition(s[e][0])?1:-1:t[e][0].sourceIndex-s[e][0].sourceIndex}):n.sort(function(t,e){return t[0]===e[0]?0:t[0].compareDocumentPosition?2&t[0].compareDocumentPosition(e[0])?1:-1:t[0].sourceIndex-e[0].sourceIndex})}};t.fn[a]=function(e){let s=[];return(this.each(function(){if(!t.data(this,"plugin_"+a)){let n=new u(this,e);t.data(this,"plugin_"+a,n),s.push(n)}if("string"==typeof e){let i=Array.prototype.slice.call(arguments,1);data[e].apply(data,i)}}),1===s.length)?s[0]:null}}(jQuery,window,document);
